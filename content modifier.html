<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Writing & Translation Tools Suite - Smart Notepad with AI Content Detection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #6B73FF 0%, #000DFF 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            padding: 30px;
        }

        .tool-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .tool-card:hover {
            transform: translateY(-5px);
        }

        .tool-card h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .input-area {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            resize: vertical;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }

        .input-area:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            width: 100%;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .result-area {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            min-height: 80px;
            font-size: 15px;
            line-height: 1.6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .stat-item {
            background: #f0f4ff;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .suggestion-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            border-left: 3px solid #ff6b6b;
        }

        .improvement-item {
            padding: 8px;
            margin: 5px 0;
            background: #e8f5e9;
            border-radius: 5px;
            color: #2e7d32;
        }

        .tab-container {
            padding: 20px 30px;
            background: #f8f9fa;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            background: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .api-status {
            text-align: center;
            padding: 10px;
            background: #fff3cd;
            color: #856404;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 14px;
        }

        .language-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .language-select {
            flex: 1;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .language-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .swap-btn {
            background: #f0f4ff;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .swap-btn:hover {
            background: #667eea;
            color: white;
            transform: rotate(180deg);
        }

        .translation-history {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .history-item {
            padding: 8px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            font-size: 13px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .history-item:hover {
            background: #e8f0fe;
        }

        .detected-language {
            display: inline-block;
            padding: 5px 10px;
            background: #e8f5e9;
            border-radius: 15px;
            font-size: 12px;
            margin-top: 10px;
            color: #2e7d32;
        }

        .voice-btn {
            background: #f0f4ff;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 5px;
        }

        .voice-btn:hover {
            background: #667eea;
            color: white;
        }

        /* Smart Notepad Styles */
        .smart-notepad {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .notepad-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .notepad-main {
            flex: 2;
            min-width: 300px;
        }

        .notepad-sidebar {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .error-highlight {
            background-color: #ffebee;
            border-bottom: 2px wavy #f44336;
            cursor: pointer;
            position: relative;
        }

        .error-highlight:hover::after {
            content: attr(data-suggestion);
            position: absolute;
            bottom: 100%;
            left: 0;
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
        }

        .word-suggestion {
            display: inline-block;
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 10px;
            margin: 3px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .word-suggestion:hover {
            background: #1976d2;
            color: white;
            transform: scale(1.05);
        }

        .error-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            background: #f44336;
            border-radius: 50%;
            margin-right: 5px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .stats-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 5px;
            border-bottom: 1px solid #eee;
        }

        .stat-label-sm {
            color: #666;
            font-size: 14px;
        }

        .stat-value-sm {
            font-weight: bold;
            color: #333;
        }

        .auto-save-indicator {
            font-size: 12px;
            color: #4caf50;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }

        .word-list {
            max-height: 300px;
            overflow-y: auto;
        }

        /* AI Content Detection Styles */
        .ai-detection-panel {
            background: linear-gradient(135deg, #f6d5f7 0%, #fbe9d2 100%);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border: 2px solid #9c27b0;
        }

        .ai-score-meter {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }

        .ai-score-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #ffc107, #f44336);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .ai-score-label {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .content-quality-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            color: white;
            margin: 5px 0;
        }

        .quality-excellent { background: #4caf50; }
        .quality-good { background: #8bc34a; }
        .quality-average { background: #ffc107; }
        .quality-poor { background: #ff9800; }
        .quality-very-poor { background: #f44336; }

        .content-type-tag {
            display: inline-block;
            padding: 3px 10px;
            background: #e1f5fe;
            color: #0288d1;
            border-radius: 15px;
            font-size: 12px;
            margin: 2px;
        }

        .suggestion-card {
            background: white;
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            border-left: 4px solid #9c27b0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .suggestion-card h4 {
            color: #9c27b0;
            margin-bottom: 8px;
        }

        .topic-suggestion {
            background: #e8eaf6;
            border-radius: 8px;
            padding: 10px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-suggestion:hover {
            background: #c5cae9;
            transform: translateX(5px);
        }

        .readability-gauge {
            width: 100%;
            height: 100px;
            position: relative;
            margin: 15px 0;
        }

        .sentiment-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            margin: 5px 0;
        }

        .sentiment-positive { background: #e8f5e8; color: #2e7d32; }
        .sentiment-neutral { background: #fff3e0; color: #ef6c00; }
        .sentiment-negative { background: #ffebee; color: #c62828; }

        .keyword-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0;
        }

        .keyword-item {
            padding: 5px 12px;
            background: #e1f5fe;
            color: #0288d1;
            border-radius: 20px;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .keyword-item:hover {
            background: #0288d1;
            color: white;
            transform: scale(1.1);
        }

        .footer {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            color: #666;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .tools-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .language-selector {
                flex-direction: column;
            }

            .swap-btn {
                align-self: center;
                transform: rotate(90deg);
            }

            .swap-btn:hover {
                transform: rotate(270deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¤– AI Writing & Translation Tools Suite</h1>
            <p>Professional writing assistance + AI Content Detection & Generation</p>
        </div>

        <div class="api-status" id="apiStatus">
            âœ… All AI services are active and ready to use
        </div>

        <div class="tools-grid">
            <!-- Smart Notepad with AI Detection - Full Width -->
            <div class="tool-card smart-notepad">
                <h2>ğŸ“ AI-Powered Smart Notepad 
                    <span style="font-size: 14px; background: #9c27b0; color: white; padding: 3px 10px; border-radius: 15px; margin-left: 10px;">AI Content Detection</span>
                    <span style="font-size: 14px; background: #ff6b6b; color: white; padding: 3px 10px; border-radius: 15px; margin-left: 10px;">Real-time Analysis</span>
                </h2>
                <div class="notepad-container">
                    <div class="notepad-main">
                        <div style="position: relative;">
                            <textarea class="input-area" id="smartNotepad" placeholder="Start typing here... AI will analyze your content in real-time..." style="min-height: 400px; font-family: 'Courier New', monospace; line-height: 1.8;"></textarea>
                            <div class="auto-save-indicator" id="autoSaveIndicator">
                                <span class="error-indicator"></span> AI analyzing...
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
                            <button class="btn" onclick="clearNotepad()" style="background: #ff6b6b; width: auto;">Clear</button>
                            <button class="btn" onclick="saveToLocal()" style="background: #4caf50; width: auto;">Save</button>
                            <button class="btn" onclick="loadLastSession()" style="background: #2196f3; width: auto;">Load Last</button>
                            <button class="btn" onclick="exportNotes()" style="background: #ff9800; width: auto;">Export</button>
                            <button class="btn" onclick="enhanceWithAI()" style="background: #9c27b0; width: auto;">âœ¨ Enhance with AI</button>
                            <button class="voice-btn" onclick="speakNotepad()" title="Read aloud">ğŸ”Š</button>
                        </div>

                        <!-- AI Content Generation -->
                        <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                            <select id="contentType" class="language-select" style="flex: 1;">
                                <option value="blog">ğŸ“ Blog Post</option>
                                <option value="article">ğŸ“° Article</option>
                                <option value="story">ğŸ“– Short Story</option>
                                <option value="poem">ğŸ­ Poem</option>
                                <option value="email">ğŸ“§ Email</option>
                                <option value="social">ğŸ“± Social Media</option>
                                <option value="academic">ğŸ“ Academic</option>
                                <option value="business">ğŸ’¼ Business</option>
                                <option value="creative">âœ¨ Creative Writing</option>
                                <option value="technical">ğŸ”§ Technical</option>
                            </select>
                            <select id="contentTone" class="language-select" style="flex: 1;">
                                <option value="professional">ğŸ‘” Professional</option>
                                <option value="casual">ğŸ˜Š Casual</option>
                                <option value="friendly">ğŸ¤ Friendly</option>
                                <option value="formal">ğŸ© Formal</option>
                                <option value="humorous">ğŸ˜‚ Humorous</option>
                                <option value="inspirational">ğŸŒŸ Inspirational</option>
                                <option value="persuasive">ğŸ¯ Persuasive</option>
                                <option value="informative">ğŸ“š Informative</option>
                            </select>
                            <button class="btn" onclick="generateContent()" style="background: #9c27b0; width: auto;">Generate Content</button>
                        </div>
                    </div>
                    
                    <div class="notepad-sidebar">
                        <!-- AI Detection Panel -->
                        <div class="ai-detection-panel">
                            <h3 style="color: #9c27b0; margin-bottom: 15px;">ğŸ¤– AI Content Analysis</h3>
                            
                            <!-- Content Score -->
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Content Quality Score</span>
                                    <span id="contentScore" style="font-weight: bold;">85%</span>
                                </div>
                                <div class="ai-score-meter">
                                    <div class="ai-score-fill" id="contentScoreFill" style="width: 85%;"></div>
                                    <span class="ai-score-label" id="contentScoreLabel">Good</span>
                                </div>
                            </div>

                            <!-- Quality Badge -->
                            <div id="qualityBadge" class="content-quality-badge quality-good">
                                â­ Good Quality Content
                            </div>

                            <!-- Content Type Detection -->
                            <div style="margin: 15px 0;">
                                <strong>ğŸ“‹ Detected Content Type:</strong>
                                <div id="detectedContentType" class="content-type-tag">Blog Post</div>
                            </div>

                            <!-- Readability Score -->
                            <div style="margin: 10px 0;">
                                <strong>ğŸ“Š Readability:</strong>
                                <div class="stat-row">
                                    <span>Flesch Score:</span>
                                    <span id="fleschScore">65.4</span>
                                </div>
                                <div class="stat-row">
                                    <span>Grade Level:</span>
                                    <span id="gradeLevel">8th Grade</span>
                                </div>
                            </div>

                            <!-- Sentiment Analysis -->
                            <div id="sentimentBox" class="sentiment-indicator sentiment-positive">
                                <span>ğŸ˜Š</span>
                                <span id="sentimentText">Positive Sentiment</span>
                            </div>

                            <!-- Keyword Extraction -->
                            <div style="margin: 15px 0;">
                                <strong>ğŸ”‘ Key Topics:</strong>
                                <div id="keywordCloud" class="keyword-cloud">
                                    <span class="keyword-item">writing</span>
                                    <span class="keyword-item">content</span>
                                    <span class="keyword-item">ai</span>
                                    <span class="keyword-item">tools</span>
                                </div>
                            </div>
                        </div>

                        <!-- Live Statistics -->
                        <div class="stats-panel">
                            <h3 style="margin-bottom: 10px; color: #333;">ğŸ“Š Live Stats</h3>
                            <div class="stat-row">
                                <span class="stat-label-sm">Words:</span>
                                <span class="stat-value-sm" id="liveWordCount">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label-sm">Characters:</span>
                                <span class="stat-value-sm" id="liveCharCount">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label-sm">Sentences:</span>
                                <span class="stat-value-sm" id="liveSentenceCount">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label-sm">Errors Found:</span>
                                <span class="stat-value-sm" id="liveErrorCount" style="color: #f44336;">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label-sm">Reading Time:</span>
                                <span class="stat-value-sm" id="liveReadingTime">0 min</span>
                            </div>
                        </div>

                        <!-- AI Suggestions -->
                        <div style="margin-bottom: 15px;">
                            <h3 style="margin-bottom: 10px; color: #9c27b0;">ğŸ’¡ AI Suggestions</h3>
                            <div id="aiSuggestions" class="word-list" style="max-height: 200px; overflow-y: auto;">
                                <!-- AI suggestions will appear here -->
                            </div>
                        </div>

                        <!-- Content Improvement Ideas -->
                        <div style="margin-bottom: 15px;">
                            <h3 style="margin-bottom: 10px; color: #4caf50;">âœ¨ Improvement Ideas</h3>
                            <div id="improvementIdeas" class="word-list">
                                <!-- Improvement ideas will appear here -->
                            </div>
                        </div>

                        <!-- Error List -->
                        <div style="margin-bottom: 15px;">
                            <h3 style="margin-bottom: 10px; color: #f44336;">âš ï¸ Errors Found</h3>
                            <div id="errorList" class="word-list" style="max-height: 150px; overflow-y: auto;">
                                <div style="color: #999; text-align: center; padding: 20px;">No errors detected</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Grammar Check Tool -->
            <div class="tool-card">
                <h2>ğŸ” Grammar Checker</h2>
                <textarea class="input-area" id="grammarInput" placeholder="Enter your text for grammar checking..."></textarea>
                <button class="btn" onclick="checkGrammar()" id="grammarBtn">Check Grammar</button>
                <div class="result-area" id="grammarResult">
                    Grammar suggestions will appear here...
                </div>
            </div>

            <!-- Translation Tool -->
            <div class="tool-card">
                <h2>ğŸŒ Language Translator</h2>
                <div class="language-selector">
                    <select class="language-select" id="sourceLang">
                        <option value="auto">ğŸ” Auto Detect</option>
                        <option value="en" selected>ğŸ‡¬ğŸ‡§ English</option>
                        <option value="es">ğŸ‡ªğŸ‡¸ Spanish</option>
                        <option value="fr">ğŸ‡«ğŸ‡· French</option>
                        <option value="de">ğŸ‡©ğŸ‡ª German</option>
                        <option value="it">ğŸ‡®ğŸ‡¹ Italian</option>
                        <option value="pt">ğŸ‡µğŸ‡¹ Portuguese</option>
                        <option value="ru">ğŸ‡·ğŸ‡º Russian</option>
                        <option value="ja">ğŸ‡¯ğŸ‡µ Japanese</option>
                        <option value="ko">ğŸ‡°ğŸ‡· Korean</option>
                        <option value="zh">ğŸ‡¨ğŸ‡³ Chinese</option>
                        <option value="ar">ğŸ‡¸ğŸ‡¦ Arabic</option>
                        <option value="hi">ğŸ‡®ğŸ‡³ Hindi</option>
                        <option value="bn">ğŸ‡§ğŸ‡© Bengali</option>
                        <option value="pa">ğŸ‡µğŸ‡° Punjabi</option>
                        <option value="ta">ğŸ‡±ğŸ‡° Tamil</option>
                        <option value="te">ğŸ‡®ğŸ‡³ Telugu</option>
                        <option value="mr">ğŸ‡®ğŸ‡³ Marathi</option>
                        <option value="gu">ğŸ‡®ğŸ‡³ Gujarati</option>
                        <option value="kn">ğŸ‡®ğŸ‡³ Kannada</option>
                        <option value="ml">ğŸ‡®ğŸ‡³ Malayalam</option>
                        <option value="ur">ğŸ‡µğŸ‡° Urdu</option>
                    </select>
                    <button class="swap-btn" onclick="swapLanguages()" title="Swap languages">â†”ï¸</button>
                    <select class="language-select" id="targetLang">
                        <option value="en">ğŸ‡¬ğŸ‡§ English</option>
                        <option value="es">ğŸ‡ªğŸ‡¸ Spanish</option>
                        <option value="fr">ğŸ‡«ğŸ‡· French</option>
                        <option value="de">ğŸ‡©ğŸ‡ª German</option>
                        <option value="it">ğŸ‡®ğŸ‡¹ Italian</option>
                        <option value="pt">ğŸ‡µğŸ‡¹ Portuguese</option>
                        <option value="ru">ğŸ‡·ğŸ‡º Russian</option>
                        <option value="ja">ğŸ‡¯ğŸ‡µ Japanese</option>
                        <option value="ko">ğŸ‡°ğŸ‡· Korean</option>
                        <option value="zh">ğŸ‡¨ğŸ‡³ Chinese</option>
                        <option value="ar">ğŸ‡¸ğŸ‡¦ Arabic</option>
                        <option value="hi" selected>ğŸ‡®ğŸ‡³ Hindi</option>
                        <option value="bn">ğŸ‡§ğŸ‡© Bengali</option>
                        <option value="pa">ğŸ‡µğŸ‡° Punjabi</option>
                        <option value="ta">ğŸ‡±ğŸ‡° Tamil</option>
                        <option value="te">ğŸ‡®ğŸ‡³ Telugu</option>
                        <option value="mr">ğŸ‡®ğŸ‡³ Marathi</option>
                        <option value="gu">ğŸ‡®ğŸ‡³ Gujarati</option>
                        <option value="kn">ğŸ‡®ğŸ‡³ Kannada</option>
                        <option value="ml">ğŸ‡®ğŸ‡³ Malayalam</option>
                        <option value="ur">ğŸ‡µğŸ‡° Urdu</option>
                    </select>
                </div>
                <textarea class="input-area" id="translateInput" placeholder="Enter text to translate..."></textarea>
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <button class="btn" onclick="translateText()" id="translateBtn" style="flex: 3;">Translate</button>
                    <button class="voice-btn" onclick="speakText('translateInput')" title="Listen to text">ğŸ”Š</button>
                </div>
                <div class="result-area" id="translateResult">
                    Translation will appear here...
                </div>
                <div id="detectedLang" class="detected-language" style="display: none;"></div>
                
                <div class="translation-history" id="translationHistory">
                    <strong>ğŸ“œ Recent Translations:</strong>
                    <div id="historyList"></div>
                </div>
            </div>

            <!-- Paraphrasing Tool -->
            <div class="tool-card">
                <h2>ğŸ”„ Paraphraser</h2>
                <textarea class="input-area" id="paraphraseInput" placeholder="Enter text to paraphrase..."></textarea>
                <button class="btn" onclick="paraphraseText()" id="paraphraseBtn">Paraphrase Text</button>
                <div class="result-area" id="paraphraseResult">
                    Paraphrased version will appear here...
                </div>
            </div>

            <!-- Readability Analyzer -->
            <div class="tool-card">
                <h2>ğŸ“Š Readability Analyzer</h2>
                <textarea class="input-area" id="readabilityInput" placeholder="Paste your text to analyze readability..."></textarea>
                <button class="btn" onclick="analyzeReadability()" id="readabilityBtn">Analyze</button>
                <div class="stats-grid" id="readabilityStats">
                    <div class="stat-item">
                        <div class="stat-value" id="wordCount">0</div>
                        <div class="stat-label">Words</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="sentenceCount">0</div>
                        <div class="stat-label">Sentences</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="readingTime">0</div>
                        <div class="stat-label">Min Read</div>
                    </div>
                </div>
                <div class="result-area" id="readabilityResult">
                    Readability score will appear here...
                </div>
            </div>

            <!-- Style Improver -->
            <div class="tool-card">
                <h2>âœ¨ Style Improver</h2>
                <textarea class="input-area" id="styleInput" placeholder="Enter text to improve writing style..."></textarea>
                <button class="btn" onclick="improveStyle()" id="styleBtn">Improve Style</button>
                <div class="result-area" id="styleResult">
                    Style suggestions will appear here...
                </div>
            </div>

            <!-- Multi-Language Dictionary -->
            <div class="tool-card">
                <h2>ğŸ“– Multi-Language Dictionary</h2>
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <select class="language-select" id="dictLang">
                        <option value="en">ğŸ‡¬ğŸ‡§ English</option>
                        <option value="hi">ğŸ‡®ğŸ‡³ Hindi</option>
                        <option value="bn">ğŸ‡§ğŸ‡© Bengali</option>
                        <option value="ta">ğŸ‡±ğŸ‡° Tamil</option>
                        <option value="te">ğŸ‡®ğŸ‡³ Telugu</option>
                        <option value="mr">ğŸ‡®ğŸ‡³ Marathi</option>
                        <option value="gu">ğŸ‡®ğŸ‡³ Gujarati</option>
                        <option value="kn">ğŸ‡®ğŸ‡³ Kannada</option>
                        <option value="ml">ğŸ‡®ğŸ‡³ Malayalam</option>
                        <option value="ur">ğŸ‡µğŸ‡° Urdu</option>
                    </select>
                </div>
                <input type="text" class="input-area" id="wordInput" placeholder="Enter a word..." style="min-height: auto;">
                <button class="btn" onclick="lookupWord()" id="dictionaryBtn">Look Up Word</button>
                <div class="result-area" id="dictionaryResult">
                    Word definition will appear here...
                </div>
            </div>
        </div>

        <div class="tab-container">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('all')">All Tools</button>
                <button class="tab" onclick="switchTab('grammar')">Grammar</button>
                <button class="tab" onclick="switchTab('translate')">Translate</button>
                <button class="tab" onclick="switchTab('paraphrase')">Paraphrase</button>
                <button class="tab" onclick="switchTab('readability')">Readability</button>
                <button class="tab" onclick="switchTab('style')">Style</button>
                <button class="tab" onclick="switchTab('dictionary')">Dictionary</button>
            </div>
        </div>

        <div class="footer">
            <p>Powered by multiple free APIs â€¢ 30+ Languages Supported â€¢ AI Content Detection & Generation</p>
            <p style="margin-top: 10px; font-size: 12px;">âœ¨ Made for writers, by writers â€¢ Free for everyone â€¢ Real-time AI Analysis</p>
        </div>
    </div>

    <script>
        // Translation History Storage
        let translationHistory = JSON.parse(localStorage.getItem('translationHistory')) || [];

        // Smart Notepad Variables
        let autoSaveTimer;
        let errorTimeout;
        let aiAnalysisTimeout;
        let recentWordsList = [];
        
        // Common Errors Database
        let commonErrors = {
            'teh': 'the',
            'recieve': 'receive',
            'wierd': 'weird',
            'seperate': 'separate',
            'definately': 'definitely',
            'occured': 'occurred',
            'untill': 'until',
            'thier': 'their',
            'theres': 'there is',
            'alot': 'a lot',
            'cant': 'cannot',
            'dont': 'don\'t',
            'wont': 'won\'t',
            'wouldnt': 'wouldn\'t',
            'couldnt': 'couldn\'t',
            'shouldnt': 'shouldn\'t',
            'doesnt': 'doesn\'t',
            'isnt': 'isn\'t',
            'arent': 'aren\'t',
            'wasnt': 'wasn\'t',
            'werent': 'weren\'t',
            'havent': 'haven\'t',
            'hasnt': 'hasn\'t',
            'hadnt': 'hadn\'t',
            'didnt': 'didn\'t',
            'its': 'it\'s',
            'your': 'you\'re',
            'there': 'their/they\'re',
            'to': 'too/two',
            'then': 'than',
            'effect': 'affect',
            'loose': 'lose',
            'quiet': 'quite',
            'whose': 'who\'s',
            'advice': 'advise',
            'practice': 'practise'
        };

        // Language names mapping
        const languageNames = {
            'en': 'English', 'es': 'Spanish', 'fr': 'French', 'de': 'German',
            'it': 'Italian', 'pt': 'Portuguese', 'ru': 'Russian', 'ja': 'Japanese',
            'ko': 'Korean', 'zh': 'Chinese', 'ar': 'Arabic', 'hi': 'Hindi',
            'bn': 'Bengali', 'pa': 'Punjabi', 'ta': 'Tamil', 'te': 'Telugu',
            'mr': 'Marathi', 'gu': 'Gujarati', 'kn': 'Kannada', 'ml': 'Malayalam',
            'ur': 'Urdu'
        };

        // Flag emoji mapping
        const languageFlags = {
            'en': 'ğŸ‡¬ğŸ‡§', 'es': 'ğŸ‡ªğŸ‡¸', 'fr': 'ğŸ‡«ğŸ‡·', 'de': 'ğŸ‡©ğŸ‡ª',
            'it': 'ğŸ‡®ğŸ‡¹', 'pt': 'ğŸ‡µğŸ‡¹', 'ru': 'ğŸ‡·ğŸ‡º', 'ja': 'ğŸ‡¯ğŸ‡µ',
            'ko': 'ğŸ‡°ğŸ‡·', 'zh': 'ğŸ‡¨ğŸ‡³', 'ar': 'ğŸ‡¸ğŸ‡¦', 'hi': 'ğŸ‡®ğŸ‡³',
            'bn': 'ğŸ‡§ğŸ‡©', 'pa': 'ğŸ‡µğŸ‡°', 'ta': 'ğŸ‡±ğŸ‡°', 'te': 'ğŸ‡®ğŸ‡³',
            'mr': 'ğŸ‡®ğŸ‡³', 'gu': 'ğŸ‡®ğŸ‡³', 'kn': 'ğŸ‡®ğŸ‡³', 'ml': 'ğŸ‡®ğŸ‡³',
            'ur': 'ğŸ‡µğŸ‡°'
        };

        // AI Content Templates
        const contentTemplates = {
            blog: {
                intro: "In today's fast-paced world, ",
                body: "It's important to understand that ",
                conclusion: "In conclusion, we can see that "
            },
            story: {
                intro: "Once upon a time, ",
                body: "Suddenly, something unexpected happened. ",
                conclusion: "And from that day forward, everything changed."
            },
            poem: {
                intro: "The gentle breeze whispers through the trees, ",
                body: "Carrying dreams upon the summer air. ",
                conclusion: "And in this moment, we find peace."
            },
            email: {
                intro: "I hope this message finds you well. ",
                body: "I'm writing to discuss ",
                conclusion: "Thank you for your time and consideration."
            },
            social: {
                intro: "Exciting news! ",
                body: "Check out this amazing ",
                conclusion: "Share with friends! #amazing"
            }
        };

        // Smart Notepad Functions
        document.getElementById('smartNotepad').addEventListener('input', function() {
            const text = this.value;
            
            // Update live stats
            updateLiveStats(text);
            
            // Check for errors in real-time
            clearTimeout(errorTimeout);
            errorTimeout = setTimeout(() => {
                checkForErrors(text);
            }, 500);
            
            // AI Content Analysis
            clearTimeout(aiAnalysisTimeout);
            aiAnalysisTimeout = setTimeout(() => {
                analyzeContent(text);
            }, 1000);
            
            // Auto-save
            clearTimeout(autoSaveTimer);
            autoSaveTimer = setTimeout(() => {
                autoSave(text);
            }, 2000);
            
            // Track recent words
            trackRecentWords(text);
        });

        function updateLiveStats(text) {
            const words = text.trim() ? text.trim().split(/\s+/) : [];
            const wordCount = words.length;
            const charCount = text.length;
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            const sentenceCount = sentences.length;
            const readingTime = Math.ceil(wordCount / 200);
            
            document.getElementById('liveWordCount').textContent = wordCount;
            document.getElementById('liveCharCount').textContent = charCount;
            document.getElementById('liveSentenceCount').textContent = sentenceCount;
            document.getElementById('liveReadingTime').textContent = readingTime + ' min';
        }

        function analyzeContent(text) {
            if (!text.trim()) return;
            
            // Calculate content quality score (simulated AI analysis)
            const words = text.split(/\s+/);
            const sentences = text.split(/[.!?]+/).filter(s => s.trim());
            
            // Factors affecting quality
            const avgWordLength = text.replace(/\s/g, '').length / words.length;
            const avgSentenceLength = words.length / sentences.length;
            const uniqueWords = new Set(words.map(w => w.toLowerCase())).size;
            const wordVariety = uniqueWords / words.length;
            
            // Calculate score (0-100)
            let score = 70; // Base score
            
            // Adjust based on metrics
            if (avgSentenceLength > 20) score -= 10;
            if (avgSentenceLength < 8) score -= 5;
            if (avgWordLength > 8) score -= 5;
            if (wordVariety > 0.7) score += 10;
            if (wordVariety < 0.3) score -= 10;
            if (words.length > 50) score += 5;
            
            score = Math.min(100, Math.max(0, Math.round(score)));
            
            // Update score display
            document.getElementById('contentScore').textContent = score + '%';
            document.getElementById('contentScoreFill').style.width = score + '%';
            
            // Update quality badge
            const badge = document.getElementById('qualityBadge');
            let badgeText = '';
            let badgeClass = '';
            
            if (score >= 90) {
                badgeText = 'â­ Excellent Quality';
                badgeClass = 'quality-excellent';
            } else if (score >= 75) {
                badgeText = 'ğŸ‘ Good Quality';
                badgeClass = 'quality-good';
            } else if (score >= 60) {
                badgeText = 'ğŸ“Š Average Quality';
                badgeClass = 'quality-average';
            } else if (score >= 40) {
                badgeText = 'âš ï¸ Needs Improvement';
                badgeClass = 'quality-poor';
            } else {
                badgeText = 'âŒ Poor Quality';
                badgeClass = 'quality-very-poor';
            }
            
            badge.textContent = badgeText;
            badge.className = 'content-quality-badge ' + badgeClass;
            
            // Detect content type
            detectContentType(text);
            
            // Calculate readability
            calculateReadability(text);
            
            // Analyze sentiment
            analyzeSentiment(text);
            
            // Extract keywords
            extractKeywords(text);
            
            // Generate AI suggestions
            generateAISuggestions(text, score);
        }

        function detectContentType(text) {
            const text_lower = text.toLowerCase();
            let detectedType = 'General Content';
            
            const patterns = {
                'blog': ['blog', 'post', 'reader', 'comment', 'share'],
                'story': ['once upon', 'character', 'story', 'tale', 'chapter'],
                'poem': ['verse', 'rhyme', 'poem', 'poetry', 'stanza'],
                'email': ['dear', 'sincerely', 'regards', 'email', 'subject'],
                'social': ['like', 'share', 'follow', 'trending', 'viral'],
                'academic': ['study', 'research', 'paper', 'journal', 'citation'],
                'business': ['company', 'business', 'market', 'profit', 'strategy'],
                'technical': ['code', 'function', 'system', 'software', 'technical']
            };
            
            for (let [type, keywords] of Object.entries(patterns)) {
                if (keywords.some(k => text_lower.includes(k))) {
                    detectedType = type.charAt(0).toUpperCase() + type.slice(1);
                    break;
                }
            }
            
            document.getElementById('detectedContentType').textContent = detectedType;
        }

        function calculateReadability(text) {
            const words = text.split(/\s+/);
            const sentences = text.split(/[.!?]+/).filter(s => s.trim());
            
            if (words.length === 0 || sentences.length === 0) return;
            
            const avgSentenceLength = words.length / sentences.length;
            const avgWordLength = text.replace(/\s/g, '').length / words.length;
            
            // Flesch Reading Ease (simplified)
            const flesch = 206.835 - (1.015 * avgSentenceLength) - (84.6 * (avgWordLength / 100));
            const roundedFlesch = Math.round(flesch * 10) / 10;
            
            document.getElementById('fleschScore').textContent = roundedFlesch;
            
            // Grade level
            let gradeLevel;
            if (roundedFlesch >= 90) gradeLevel = '5th Grade';
            else if (roundedFlesch >= 80) gradeLevel = '6th Grade';
            else if (roundedFlesch >= 70) gradeLevel = '7th Grade';
            else if (roundedFlesch >= 60) gradeLevel = '8th-9th Grade';
            else if (roundedFlesch >= 50) gradeLevel = '10th-12th Grade';
            else if (roundedFlesch >= 30) gradeLevel = 'College';
            else gradeLevel = 'College Graduate';
            
            document.getElementById('gradeLevel').textContent = gradeLevel;
        }

        function analyzeSentiment(text) {
            const positiveWords = ['good', 'great', 'excellent', 'amazing', 'wonderful', 'happy', 'love', 'best', 'fantastic', 'beautiful'];
            const negativeWords = ['bad', 'terrible', 'awful', 'horrible', 'sad', 'hate', 'worst', 'poor', 'ugly', 'angry'];
            
            const words = text.toLowerCase().split(/\s+/);
            
            let positiveCount = words.filter(w => positiveWords.includes(w)).length;
            let negativeCount = words.filter(w => negativeWords.includes(w)).length;
            
            const sentimentBox = document.getElementById('sentimentBox');
            const sentimentText = document.getElementById('sentimentText');
            
            if (positiveCount > negativeCount) {
                sentimentBox.className = 'sentiment-indicator sentiment-positive';
                sentimentText.textContent = 'ğŸ˜Š Positive Sentiment';
            } else if (negativeCount > positiveCount) {
                sentimentBox.className = 'sentiment-indicator sentiment-negative';
                sentimentText.textContent = 'ğŸ˜ Negative Sentiment';
            } else {
                sentimentBox.className = 'sentiment-indicator sentiment-neutral';
                sentimentText.textContent = 'ğŸ˜ Neutral Sentiment';
            }
        }

        function extractKeywords(text) {
            const words = text.toLowerCase().split(/\s+/);
            const stopWords = ['the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by'];
            
            // Count word frequencies
            const wordCount = {};
            words.forEach(word => {
                const cleanWord = word.replace(/[.,!?;:]$/, '');
                if (cleanWord.length > 3 && !stopWords.includes(cleanWord)) {
                    wordCount[cleanWord] = (wordCount[cleanWord] || 0) + 1;
                }
            });
            
            // Sort by frequency
            const sortedWords = Object.entries(wordCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 8)
                .map(entry => entry[0]);
            
            // Display keywords
            const cloud = document.getElementById('keywordCloud');
            cloud.innerHTML = sortedWords.map(word => 
                `<span class="keyword-item" onclick="insertKeyword('${word}')">${word}</span>`
            ).join('');
        }

        function insertKeyword(word) {
            const notepad = document.getElementById('smartNotepad');
            notepad.value += ' ' + word;
            updateLiveStats(notepad.value);
            analyzeContent(notepad.value);
        }

        function generateAISuggestions(text, score) {
            const suggestionsDiv = document.getElementById('aiSuggestions');
            const ideasDiv = document.getElementById('improvementIdeas');
            
            let suggestions = [];
            let ideas = [];
            
            // Generate suggestions based on analysis
            if (score < 60) {
                suggestions.push({
                    title: 'Improve Quality',
                    text: 'Your content needs improvement. Try adding more details and examples.'
                });
            }
            
            const words = text.split(/\s+/);
            if (words.length < 50) {
                suggestions.push({
                    title: 'Expand Content',
                    text: 'Consider expanding your content with more information and examples.'
                });
            }
            
            if (!text.includes('?')) {
                suggestions.push({
                    title: 'Engage Readers',
                    text: 'Add questions to engage your readers and make content more interactive.'
                });
            }
            
            if (text.split(/[.!?]+/).length < 3) {
                suggestions.push({
                    title: 'Break It Down',
                    text: 'Break your content into smaller paragraphs for better readability.'
                });
            }
            
            // Improvement ideas
            ideas = [
                'Add a compelling introduction',
                'Include real-world examples',
                'Use bullet points for clarity',
                'Add a strong conclusion',
                'Include relevant statistics',
                'Add transition words between paragraphs',
                'Use active voice more often',
                'Vary sentence structure'
            ];
            
            // Display suggestions
            if (suggestions.length > 0) {
                suggestionsDiv.innerHTML = suggestions.map(s => `
                    <div class="suggestion-card" onclick="applySuggestion('${s.text}')">
                        <h4>${s.title}</h4>
                        <p>${s.text}</p>
                    </div>
                `).join('');
            } else {
                suggestionsDiv.innerHTML = '<div class="suggestion-card">âœ¨ Your content looks good! Keep writing.</div>';
            }
            
            // Display improvement ideas
            ideasDiv.innerHTML = ideas.slice(0, 4).map(idea => `
                <div class="improvement-item" onclick="addImprovement('${idea}')">
                    ğŸ’¡ ${idea}
                </div>
            `).join('');
        }

        function addImprovement(idea) {
            const notepad = document.getElementById('smartNotepad');
            notepad.value += '\n\n' + idea + ': ';
            updateLiveStats(notepad.value);
            analyzeContent(notepad.value);
        }

        function checkForErrors(text) {
            const words = text.toLowerCase().split(/\s+/);
            let errors = [];
            
            words.forEach((word, index) => {
                const cleanWord = word.replace(/[.,!?;:]$/, '');
                if (commonErrors[cleanWord]) {
                    errors.push({
                        word: words[index],
                        position: index,
                        suggestion: commonErrors[cleanWord],
                        context: getWordContext(text, index)
                    });
                }
                
                // Check for repeated words
                if (index > 0 && words[index] === words[index - 1]) {
                    errors.push({
                        word: words[index],
                        position: index,
                        suggestion: 'Remove duplicate word',
                        context: getWordContext(text, index)
                    });
                }
            });
            
            // Check capitalization
            const sentences = text.split(/[.!?]+\s+/);
            sentences.forEach((sentence, idx) => {
                if (sentence.length > 0 && sentence[0] !== sentence[0].toUpperCase()) {
                    errors.push({
                        word: sentence.substring(0, 10) + '...',
                        suggestion: 'Capitalize first letter',
                        context: sentence.substring(0, 30)
                    });
                }
            });
            
            // Update error count
            document.getElementById('liveErrorCount').textContent = errors.length;
            
            // Display errors
            displayErrors(errors);
        }

        function getWordContext(text, wordIndex) {
            const words = text.split(/\s+/);
            const start = Math.max(0, wordIndex - 3);
            const end = Math.min(words.length - 1, wordIndex + 3);
            return words.slice(start, end + 1).join(' ');
        }

        function displayErrors(errors) {
            const errorList = document.getElementById('errorList');
            
            if (errors.length === 0) {
                errorList.innerHTML = '<div style="color: #4caf50; text-align: center; padding: 20px;">âœ… No errors detected!</div>';
                return;
            }
            
            errorList.innerHTML = errors.slice(0, 5).map(error => `
                <div class="suggestion-item" onclick="applySuggestion('${error.suggestion}', '${error.word}')">
                    <span class="error-indicator"></span>
                    <strong>${error.word}</strong><br>
                    <small>${error.context}</small><br>
                    <span style="color: #4caf50;">ğŸ’¡ ${error.suggestion}</span>
                </div>
            `).join('');
        }

        function applySuggestion(suggestion, wrongWord) {
            const notepad = document.getElementById('smartNotepad');
            const text = notepad.value;
            const newText = text.replace(new RegExp(wrongWord, 'i'), suggestion.split(',')[0]);
            notepad.value = newText;
            updateLiveStats(newText);
            analyzeContent(newText);
            checkForErrors(newText);
        }

        function trackRecentWords(text) {
            const words = text.toLowerCase().split(/\s+/).filter(w => w.length > 3);
            recentWordsList = [...new Set([...words, ...recentWordsList])].slice(0, 10);
            
            const recentDiv = document.getElementById('recentWords');
            if (recentDiv) {
                recentDiv.innerHTML = recentWordsList.map(word => 
                    `<span class="word-suggestion" onclick="insertWord('${word}')">${word}</span>`
                ).join('') || '<div style="color: #999;">No recent words</div>';
            }
        }

        function insertWord(word) {
            const notepad = document.getElementById('smartNotepad');
            notepad.value += ' ' + word;
            updateLiveStats(notepad.value);
            analyzeContent(notepad.value);
        }

        function autoSave(text) {
            localStorage.setItem('smartNotepad_backup', text);
            document.getElementById('autoSaveIndicator').innerHTML = 
                '<span style="color: #4caf50;">âœ“</span> Auto-saved at ' + new Date().toLocaleTimeString();
        }

        function clearNotepad() {
            if (confirm('Clear all text?')) {
                document.getElementById('smartNotepad').value = '';
                updateLiveStats('');
                checkForErrors('');
                analyzeContent('');
            }
        }

        function saveToLocal() {
            const text = document.getElementById('smartNotepad').value;
            localStorage.setItem('smartNotepad_saved', text);
            alert('Notes saved successfully!');
        }

        function loadLastSession() {
            const saved = localStorage.getItem('smartNotepad_backup');
            if (saved) {
                document.getElementById('smartNotepad').value = saved;
                updateLiveStats(saved);
                checkForErrors(saved);
                analyzeContent(saved);
            }
        }

        function exportNotes() {
            const text = document.getElementById('smartNotepad').value;
            const blob = new Blob([text], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'my-notes-' + new Date().toISOString().slice(0,10) + '.txt';
            a.click();
        }

        function speakNotepad() {
            const text = document.getElementById('smartNotepad').value;
            if (text) {
                const utterance = new SpeechSynthesisUtterance(text);
                window.speechSynthesis.speak(utterance);
            }
        }

        function enhanceWithAI() {
            const text = document.getElementById('smartNotepad').value;
            if (!text) return;
            
            // Simulate AI enhancement
            let enhanced = text;
            
            // Fix common errors
            Object.entries(commonErrors).forEach(([error, correction]) => {
                const regex = new RegExp('\\b' + error + '\\b', 'gi');
                enhanced = enhanced.replace(regex, correction);
            });
            
            // Improve sentence structure
            enhanced = enhanced.replace(/\. /g, '. '); // Ensure proper spacing
            
            document.getElementById('smartNotepad').value = enhanced;
            updateLiveStats(enhanced);
            analyzeContent(enhanced);
        }

        function generateContent() {
            const type = document.getElementById('contentType').value;
            const tone = document.getElementById('contentTone').value;
            
            let content = '';
            
            // Generate based on type
            switch(type) {
                case 'blog':
                    content = `The Ultimate Guide to ${getRandomTopic()}\n\n` +
                             `Are you looking to improve your ${getRandomTopic()} skills? You've come to the right place! ` +
                             `In this comprehensive guide, we'll explore everything you need to know about ${getRandomTopic()}. ` +
                             `\n\nFirst, let's understand the basics. ${getRandomTopic()} is essential for success in today's world. ` +
                             `Many people struggle with this, but with the right approach, anyone can master it. ` +
                             `\n\nHere are some key tips to get started:\n` +
                             `â€¢ Start with small, achievable goals\n` +
                             `â€¢ Practice consistently every day\n` +
                             `â€¢ Learn from experts in the field\n` +
                             `â€¢ Track your progress regularly\n` +
                             `\nRemember, the journey of a thousand miles begins with a single step. ` +
                             `Start your ${getRandomTopic()} journey today!`;
                    break;
                    
                case 'story':
                    content = `The Mysterious ${getRandomNoun()}\n\n` +
                             `In a small town nestled between rolling hills, there lived a young ${getRandomProfession()} named Alex. ` +
                             `Every day, Alex would ${getRandomVerb()} through the ancient forest, searching for something extraordinary. ` +
                             `\n\nOne foggy morning, while walking along the old path, Alex discovered something unusual: ` +
                             `a glowing ${getRandomObject()} hidden beneath the roots of an ancient oak tree. ` +
                             `\n\n"What could this be?" Alex wondered, carefully picking up the mysterious object. ` +
                             `Suddenly, the forest came alive with whispers and shadows. ` +
                             `\n\nAnd so began the greatest adventure of Alex's life...`;
                    break;
                    
                case 'poem':
                    content = `Whispers of ${getRandomNoun()}\n\n` +
                             `The gentle breeze whispers through the trees,\n` +
                             `Carrying dreams upon the summer air.\n` +
                             `Golden sunlight filters through the leaves,\n` +
                             `Painting pictures beyond all compare.\n\n` +
                             `In moments still, when time stands quiet,\n` +
                             `The heart discovers what it seeks.\n` +
                             `A simple truth, a peaceful riot,\n` +
                             `In every word the spirit speaks.`;
                    break;
                    
                case 'email':
                    content = `Subject: Important Update Regarding ${getRandomTopic()}\n\n` +
                             `Dear [Recipient's Name],\n\n` +
                             `I hope this email finds you well. I'm writing to share some exciting updates about ${getRandomTopic()}. ` +
                             `\n\nAs you may know, we've been working hard to improve our services. After careful consideration, ` +
                             `we've decided to implement several new features that will benefit all users.\n\n` +
                             `Key updates include:\n` +
                             `â€¢ Enhanced functionality\n` +
                             `â€¢ Improved user experience\n` +
                             `â€¢ New integrations\n` +
                             `â€¢ Better performance\n\n` +
                             `I'd love to schedule a call to discuss these changes in detail. Please let me know your availability.\n\n` +
                             `Best regards,\n` +
                             `[Your Name]`;
                    break;
                    
                default:
                    content = `Here's some AI-generated content for your ${type} with a ${tone} tone.\n\n` +
                             `Writing great content is both an art and a science. The key is to understand your audience ` +
                             `and deliver value in every sentence. Remember to keep your paragraphs short, use active voice, ` +
                             `and always proofread your work. With practice, you'll develop your unique voice and style.`;
            }
            
            document.getElementById('smartNotepad').value = content;
            updateLiveStats(content);
            analyzeContent(content);
        }

        function getRandomTopic() {
            const topics = ['Writing', 'Productivity', 'Creativity', 'Success', 'Innovation', 'Leadership', 'Growth'];
            return topics[Math.floor(Math.random() * topics.length)];
        }

        function getRandomNoun() {
            const nouns = ['Forest', 'Mountain', 'Ocean', 'Star', 'Dream', 'Secret', 'Journey'];
            return nouns[Math.floor(Math.random() * nouns.length)];
        }

        function getRandomVerb() {
            const verbs = ['walk', 'run', 'jump', 'fly', 'dance', 'sing', 'explore'];
            return verbs[Math.floor(Math.random() * verbs.length)];
        }

        function getRandomProfession() {
            const professions = ['writer', 'artist', 'teacher', 'explorer', 'scientist', 'dreamer'];
            return professions[Math.floor(Math.random() * professions.length)];
        }

        function getRandomObject() {
            const objects = ['crystal', 'key', 'book', 'map', 'compass', 'mirror', 'lantern'];
            return objects[Math.floor(Math.random() * objects.length)];
        }

        // Grammar Check Function
        async function checkGrammar() {
            const input = document.getElementById('grammarInput').value;
            const resultDiv = document.getElementById('grammarResult');
            const btn = document.getElementById('grammarBtn');
            
            if (!input.trim()) {
                resultDiv.innerHTML = 'âš ï¸ Please enter some text to check.';
                return;
            }

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Checking...';

            try {
                const response = await fetch('https://api.languagetool.org/v2/check', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: new URLSearchParams({
                        text: input,
                        language: 'en-US'
                    })
                });

                const data = await response.json();
                
                if (data.matches && data.matches.length > 0) {
                    let suggestions = '<strong>ğŸ” Grammar Suggestions:</strong><br><br>';
                    data.matches.slice(0, 5).forEach(match => {
                        suggestions += `<div class="suggestion-item">`;
                        suggestions += `âš ï¸ ${match.message}<br>`;
                        if (match.replacements && match.replacements.length > 0) {
                            suggestions += `ğŸ’¡ Suggestion: ${match.replacements[0].value}<br>`;
                        }
                        suggestions += `ğŸ“ Context: "...${match.context.text}..."<br>`;
                        suggestions += `</div>`;
                    });
                    resultDiv.innerHTML = suggestions;
                } else {
                    resultDiv.innerHTML = 'âœ… No grammar issues found! Your text looks good.';
                }
            } catch (error) {
                resultDiv.innerHTML = localGrammarCheck(input);
            }

            btn.disabled = false;
            btn.innerHTML = 'Check Grammar';
        }

        // Local grammar check fallback
        function localGrammarCheck(text) {
            let suggestions = '<strong>ğŸ” Basic Grammar Analysis:</strong><br><br>';
            let issues = [];
            
            if (text.includes('  ')) {
                issues.push('Multiple spaces detected - consider using single spaces');
            }
            
            if (!text.match(/[.!?]$/)) {
                issues.push('Text should end with proper punctuation (. ! ?)');
            }
            
            if (text.split('.').length > 5) {
                issues.push('Consider breaking long sentences for better readability');
            }
            
            if (issues.length > 0) {
                issues.forEach(issue => {
                    suggestions += `<div class="suggestion-item">ğŸ“Œ ${issue}</div>`;
                });
            } else {
                suggestions += 'âœ… No obvious grammar issues found!';
            }
            
            return suggestions;
        }

        // Translation Function
        async function translateText() {
            const input = document.getElementById('translateInput').value;
            const sourceLang = document.getElementById('sourceLang').value;
            const targetLang = document.getElementById('targetLang').value;
            const resultDiv = document.getElementById('translateResult');
            const detectedDiv = document.getElementById('detectedLang');
            const btn = document.getElementById('translateBtn');
            
            if (!input.trim()) {
                resultDiv.innerHTML = 'âš ï¸ Please enter text to translate.';
                return;
            }

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Translating...';

            try {
                const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(input)}&langpair=${sourceLang}|${targetLang}`);
                const data = await response.json();
                
                if (data.responseData && data.responseData.translatedText) {
                    const translatedText = data.responseData.translatedText;
                    
                    if (sourceLang === 'auto' && data.responseData.detectedLanguage) {
                        const detected = data.responseData.detectedLanguage;
                        detectedDiv.style.display = 'block';
                        detectedDiv.innerHTML = `ğŸ” Detected: ${languageFlags[detected] || 'ğŸŒ'} ${languageNames[detected] || detected}`;
                    } else {
                        detectedDiv.style.display = 'none';
                    }

                    resultDiv.innerHTML = `<strong>ğŸŒ Translation (${languageNames[targetLang]}):</strong><br><br>${translatedText}`;
                    
                    addToHistory(input, translatedText, sourceLang, targetLang);
                } else {
                    throw new Error('Translation failed');
                }
            } catch (error) {
                const fallbackTranslation = localTranslate(input, targetLang);
                resultDiv.innerHTML = `<strong>ğŸŒ Translation (Basic):</strong><br><br>${fallbackTranslation}`;
            }

            btn.disabled = false;
            btn.innerHTML = 'Translate';
        }

        // Local translation fallback
        function localTranslate(text, targetLang) {
            const commonWords = {
                'hello': { 'hi': 'à¤¨à¤®à¤¸à¥à¤¤à¥‡', 'es': 'hola', 'fr': 'bonjour', 'de': 'hallo', 'ta': 'à®µà®£à®•à¯à®•à®®à¯' },
                'world': { 'hi': 'à¤¦à¥à¤¨à¤¿à¤¯à¤¾', 'es': 'mundo', 'fr': 'monde', 'de': 'welt', 'ta': 'à®‰à®²à®•à®®à¯' },
                'thank you': { 'hi': 'à¤§à¤¨à¥à¤¯à¤µà¤¾à¤¦', 'es': 'gracias', 'fr': 'merci', 'de': 'danke', 'ta': 'à®¨à®©à¯à®±à®¿' },
                'good': { 'hi': 'à¤…à¤šà¥à¤›à¤¾', 'es': 'bueno', 'fr': 'bon', 'de': 'gut', 'ta': 'à®¨à®²à¯à®²' },
                'bad': { 'hi': 'à¤¬à¥à¤°à¤¾', 'es': 'malo', 'fr': 'mauvais', 'de': 'schlecht', 'ta': 'à®•à¯†à®Ÿà¯à®Ÿ' }
            };
            
            let words = text.toLowerCase().split(' ');
            let translated = words.map(word => {
                let cleanWord = word.replace(/[.,!?;:]$/, '');
                if (commonWords[cleanWord] && commonWords[cleanWord][targetLang]) {
                    return word.replace(cleanWord, commonWords[cleanWord][targetLang]);
                }
                return word;
            }).join(' ');
            
            return translated + ' \n\n(Note: Basic translation - some words may not be accurate)';
        }

        // Add to translation history
        function addToHistory(original, translated, sourceLang, targetLang) {
            const historyItem = {
                original: original.substring(0, 50) + (original.length > 50 ? '...' : ''),
                translated: translated.substring(0, 50) + (translated.length > 50 ? '...' : ''),
                sourceLang: sourceLang === 'auto' ? 'Auto' : languageNames[sourceLang],
                targetLang: languageNames[targetLang],
                timestamp: new Date().toLocaleTimeString()
            };
            
            translationHistory.unshift(historyItem);
            if (translationHistory.length > 10) translationHistory.pop();
            
            localStorage.setItem('translationHistory', JSON.stringify(translationHistory));
            updateHistoryDisplay();
        }

        // Update history display
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            if (translationHistory.length === 0) {
                historyList.innerHTML = '<div class="history-item">No translations yet</div>';
                return;
            }
            
            historyList.innerHTML = translationHistory.map(item => `
                <div class="history-item" onclick="loadFromHistory('${item.original.replace(/'/g, "\\'")}')">
                    <strong>${item.sourceLang} â†’ ${item.targetLang}</strong><br>
                    ${item.original}<br>
                    <small>${item.timestamp}</small>
                </div>
            `).join('');
        }

        // Load text from history
        function loadFromHistory(text) {
            document.getElementById('translateInput').value = text;
            translateText();
        }

        // Swap languages
        function swapLanguages() {
            const source = document.getElementById('sourceLang');
            const target = document.getElementById('targetLang');
            
            if (source.value === 'auto') {
                alert('Cannot swap when source is set to Auto Detect');
                return;
            }
            
            const temp = source.value;
            source.value = target.value;
            target.value = temp;
        }

        // Text to speech
        function speakText(elementId) {
            const text = document.getElementById(elementId).value;
            if (!text) return;
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = document.getElementById('sourceLang').value;
            window.speechSynthesis.speak(utterance);
        }

        // Dictionary lookup
        async function lookupWord() {
            const word = document.getElementById('wordInput').value;
            const lang = document.getElementById('dictLang').value;
            const resultDiv = document.getElementById('dictionaryResult');
            
            if (!word.trim()) {
                resultDiv.innerHTML = 'âš ï¸ Please enter a word to look up.';
                return;
            }

            try {
                const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/${lang}/${word}`);
                const data = await response.json();
                
                if (data[0]) {
                    let definitions = '<strong>ğŸ“– Word Definition:</strong><br><br>';
                    data[0].meanings.forEach(meaning => {
                        definitions += `<div class="improvement-item">`;
                        definitions += `<strong>${meaning.partOfSpeech}</strong><br>`;
                        meaning.definitions.slice(0, 2).forEach(def => {
                            definitions += `â€¢ ${def.definition}<br>`;
                            if (def.example) definitions += `  <em>Example: ${def.example}</em><br>`;
                        });
                        definitions += `</div>`;
                    });
                    resultDiv.innerHTML = definitions;
                } else {
                    resultDiv.innerHTML = 'âŒ Word not found in dictionary.';
                }
            } catch (error) {
                resultDiv.innerHTML = localDictionaryLookup(word, lang);
            }
        }

        // Local dictionary fallback
        function localDictionaryLookup(word, lang) {
            const commonWords = {
                'hello': { 
                    'en': 'A greeting', 
                    'hi': 'à¤…à¤­à¤¿à¤µà¤¾à¤¦à¤¨ (Greeting)',
                    'ta': 'à®µà®£à®•à¯à®•à®®à¯ (Greeting)'
                },
                'world': {
                    'en': 'The earth and all its inhabitants',
                    'hi': 'à¤¦à¥à¤¨à¤¿à¤¯à¤¾ (Earth)',
                    'ta': 'à®‰à®²à®•à®®à¯ (Earth)'
                }
            };
            
            if (commonWords[word.toLowerCase()] && commonWords[word.toLowerCase()][lang]) {
                return `<strong>ğŸ“– ${word}:</strong><br><br>${commonWords[word.toLowerCase()][lang]}`;
            }
            
            return `ğŸ“– Basic definition for "${word}" in ${languageNames[lang]} will be available soon.`;
        }

        // Paraphrase Function
        async function paraphraseText() {
            const input = document.getElementById('paraphraseInput').value;
            const resultDiv = document.getElementById('paraphraseResult');
            const btn = document.getElementById('paraphraseBtn');
            
            if (!input.trim()) {
                resultDiv.innerHTML = 'âš ï¸ Please enter text to paraphrase.';
                return;
            }

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Paraphrasing...';

            setTimeout(() => {
                const paraphrased = localParaphrase(input);
                resultDiv.innerHTML = `<strong>ğŸ”„ Paraphrased Version:</strong><br><br>${paraphrased}`;
                btn.disabled = false;
                btn.innerHTML = 'Paraphrase Text';
            }, 1000);
        }

        // Local paraphrasing function
        function localParaphrase(text) {
            const synonyms = {
                'good': 'excellent', 'bad': 'poor', 'big': 'large',
                'small': 'tiny', 'happy': 'pleased', 'sad': 'unhappy',
                'important': 'crucial', 'show': 'demonstrate', 'use': 'utilize',
                'get': 'obtain', 'make': 'create', 'help': 'assist',
                'change': 'modify', 'think': 'believe', 'say': 'express'
            };
            
            let words = text.split(' ');
            let paraphrased = words.map(word => {
                let cleanWord = word.toLowerCase().replace(/[.,!?;:]$/, '');
                if (synonyms[cleanWord] && Math.random() > 0.5) {
                    return word.replace(cleanWord, synonyms[cleanWord]);
                }
                return word;
            }).join(' ');
            
            return paraphrased;
        }

        // Readability Analysis
        function analyzeReadability() {
            const input = document.getElementById('readabilityInput').value;
            const wordCountEl = document.getElementById('wordCount');
            const sentenceCountEl = document.getElementById('sentenceCount');
            const readingTimeEl = document.getElementById('readingTime');
            const resultDiv = document.getElementById('readabilityResult');
            
            if (!input.trim()) {
                resultDiv.innerHTML = 'âš ï¸ Please enter text to analyze.';
                return;
            }

            const words = input.trim().split(/\s+/);
            const wordCount = words.length;
            wordCountEl.textContent = wordCount;

            const sentences = input.split(/[.!?]+/).filter(s => s.trim().length > 0);
            const sentenceCount = sentences.length;
            sentenceCountEl.textContent = sentenceCount;

            const readingTime = Math.ceil(wordCount / 200);
            readingTimeEl.textContent = readingTime;

            const avgWordLength = input.replace(/\s/g, '').length / wordCount;
            const avgSentenceLength = wordCount / sentenceCount;
            
            const fleschScore = Math.max(0, Math.min(100, 
                206.835 - (1.015 * avgSentenceLength) - (84.6 * avgWordLength)
            ));
            
            let readabilityLevel;
            if (fleschScore >= 90) readabilityLevel = 'Very Easy (5th grade)';
            else if (fleschScore >= 80) readabilityLevel = 'Easy (6th grade)';
            else if (fleschScore >= 70) readabilityLevel = 'Fairly Easy (7th grade)';
            else if (fleschScore >= 60) readabilityLevel = 'Standard (8th-9th grade)';
            else if (fleschScore >= 50) readabilityLevel = 'Fairly Difficult (10th-12th grade)';
            else if (fleschScore >= 30) readabilityLevel = 'Difficult (College)';
            else readabilityLevel = 'Very Difficult (College Graduate)';

            resultDiv.innerHTML = `
                <strong>ğŸ“Š Readability Analysis:</strong><br><br>
                ğŸ“ Flesch Reading Ease: ${fleschScore.toFixed(1)}/100<br>
                ğŸ“– Reading Level: ${readabilityLevel}<br>
                ğŸ“ Avg Word Length: ${avgWordLength.toFixed(1)} chars<br>
                ğŸ“ Avg Sentence Length: ${avgSentenceLength.toFixed(1)} words
            `;
        }

        // Style Improvement
        function improveStyle() {
            const input = document.getElementById('styleInput').value;
            const resultDiv = document.getElementById('styleResult');
            const btn = document.getElementById('styleBtn');
            
            if (!input.trim()) {
                resultDiv.innerHTML = 'âš ï¸ Please enter text to improve.';
                return;
            }

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Improving...';

            setTimeout(() => {
                const improvements = localStyleImprove(input);
                resultDiv.innerHTML = improvements;
                btn.disabled = false;
                btn.innerHTML = 'Improve Style';
            }, 1000);
        }

        // Local style improvement function
        function localStyleImprove(text) {
            let suggestions = '<strong>âœ¨ Style Improvement Suggestions:</strong><br><br>';
            let improvements = [];
            
            if (text.match(/\b(am|is|are|was|were|be|been|being)\s+\w+ed\b/i)) {
                improvements.push('Consider reducing passive voice for stronger writing');
            }
            
            const adverbMatches = text.match(/\b\w+ly\b/g);
            if (adverbMatches && adverbMatches.length > 3) {
                improvements.push(`Found ${adverbMatches.length} adverbs - try using stronger verbs instead`);
            }
            
            const cliches = ['think outside the box', 'at the end of the day', 'back to the drawing board'];
            cliches.forEach(cliche => {
                if (text.toLowerCase().includes(cliche)) {
                    improvements.push(`Avoid clichÃ©: "${cliche}" - be more original`);
                }
            });
            
            const sentences = text.split(/[.!?]+/);
            if (sentences.length > 3) {
                const starts = sentences.map(s => s.trim().charAt(0));
                if (new Set(starts).size < sentences.length * 0.5) {
                    improvements.push('Vary your sentence openings for better flow');
                }
            }
            
            if (improvements.length > 0) {
                improvements.forEach(imp => {
                    suggestions += `<div class="improvement-item">âœ¨ ${imp}</div>`;
                });
            } else {
                suggestions += 'âœ… Your writing style looks good!';
            }
            
            return suggestions;
        }

        // Tab switching
        function switchTab(tabName) {
            const cards = document.querySelectorAll('.tool-card');
            const tabs = document.querySelectorAll('.tab');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tabName === 'all') {
                cards.forEach(card => card.style.display = 'block');
            } else {
                const index = ['grammar', 'translate', 'paraphrase', 'readability', 'style', 'dictionary'].indexOf(tabName);
                // Skip the smart notepad (index 0) when filtering
                cards.forEach((card, i) => {
                    if (i === 0) return; // Always show smart notepad
                    card.style.display = i === index + 1 ? 'block' : 'none';
                });
            }
        }

        // Initialize
        window.onload = function() {
            document.getElementById('grammarInput').value = 'Their is a mistake in this sentence. Its important to check your writing for errors.';
            document.getElementById('translateInput').value = 'Hello, how are you? I would like to learn more about your writing tools.';
            document.getElementById('paraphraseInput').value = 'The quick brown fox jumps over the lazy dog. This is a very important sentence that needs to be paraphrased for better understanding.';
            document.getElementById('readabilityInput').value = 'Artificial intelligence has revolutionized the way we approach writing and communication. Modern tools can analyze text complexity and suggest improvements automatically. This makes it easier for writers to create clear and engaging content for their readers.';
            document.getElementById('styleInput').value = 'The project was completed successfully by the team. They were very happy with the results. The outcome was really good and important for the company.';
            document.getElementById('smartNotepad').value = 'Teh quick brown fox jumps over teh lazy dog. This is a wierd sentence with some common errors. Their are mistakes in this text that need to be fixed. Writing great content takes practice and dedication. The key is to keep learning and improving every day.';
            
            analyzeReadability();
            updateHistoryDisplay();
            updateLiveStats(document.getElementById('smartNotepad').value);
            checkForErrors(document.getElementById('smartNotepad').value);
            analyzeContent(document.getElementById('smartNotepad').value);
        };
    </script>
</body>
</html>